---
layout: post
title: 对git中文件各个状态的理解
category: 工具 
tag: [git]
excerpt: 我之前开发java项目的时候也有用过版本管理工具svn，不过老是弄不清楚各个状态之间的关系和操作的含义，最近使用github管理自己的代码和一些笔记，对于一些操作还是不太理解（太笨了。。。），网上也查过一些零零碎碎的相关内容，不过还是模糊不清。于是我打算较为系统地学习一下git和github。

---
我之前开发java项目的时候也有用过版本管理工具svn，不过老是弄不清楚各个状态之间的关系和操作的含义，最近使用github管理自己的代码和一些笔记，对于一些操作还是不太理解（太笨了。。。），网上也查过一些零零碎碎的相关内容，不过还是模糊不清。于是我打算较为系统地学习一下git和github。<http://git-scm.com/book/zh/v1>这个网站系统地介绍了git原理还有操作等等，有兴趣的朋友可以参考学习。

要使用git工具进行版本管理，首先要明白git各种状态的含义。如下图所示，

![git 状态周期](http://git-scm.com/figures/18333fig0201-tn.png)

git库中文件的整个生命周期中的状态包括：

- **untracked**(未被跟踪)
- **unmodified**（未修改）
- **modified**（已修改）
- **staged**（在暂存区中）

其中**unmodified**、**modified**、**staged**表示文件已被跟踪，即已经加入版本管理中。

当从github远程库中`clone`项目到本地后，该项目中所有文件状态为**unmodified**；在该项目中新建一个文件后，该文件的状态为**untracked**，通过`git add`文件状态变为unmodified(**此时该文件的状态同时为staged，已经存在暂存区中了，其实**`git add`**的潜台词就是把目标文件加入暂存区域**)，通过编辑，文件状态变为**modified**，被修改的文件未被放到暂存区域中，此时通过`git status`命令查看的话，会发现暂存区中和未暂存区同时存在该文件！！！为什么会这样呢？？？因为此时暂存区中的该文件是上次通过`git add`命令添加时候所处的状态，而未暂存区中该文件的状态是这次通过编辑后所处的状态，git记录了两种状态，如果这个时候用`git commit`命令提交该文件，只会把该文件的前一种状态保存到**git仓库**，修改后的状态不会保存到**git仓库**，要通过`git add`操作才能将修改后的文件状态加入到暂存区域中，然后可以通过`git commit`命令将修改后的文件提交到**git仓库**，有点啰嗦了==，能够理解就好^_^。


讲到这里，有必要提一下以下三个概念：

- **git**
- **github**
- **工作目录**
- **git仓库（版本库）**
- **远程仓库**

**git**仅仅是在本地对代码进行版本管理，而**github**在网上提供了**远程仓库**，用来存放代码。如果我们只在本地使用**git**工具的话，只需用到**工作目录**和**git仓库**，如果使用**github**的话，那么**工作目录**、**git仓库**和**远程仓库**三个都要用到。

**工作目录**即本地项目的可见目录，**git**仓库即版本库，由*暂存区*和*暂存区要提交的分支（branch）*组成，**工作目录**中的文件通过`git add`操作后就进入到**git仓库**的暂存区了，在暂存区中的文件通过`git commit`操作后，可以将该文件和添加的批注添加到**git仓库**的指定分支中，而通过`git push`操作，我们可以将**git仓库**中的文件同步到**远程仓库**。

关于**工作目录**、**git仓库（版本库）**的原理可用如下图解释，具体参考<http://blog.chinaunix.net/uid-10415985-id-4112861.html>

![git中的版本库，暂存区和工作区](http://blog.chinaunix.net/attachment/201402/19/10415985_139279770639pM.jpg)

这篇文章主要介绍了通过git管理的文件的生命周期中的各种状态以及我对各种状态和各个概念的理解，如有不正确之处，恳请各位大虾批评指正，关于具体的git和github具体操作将在下次讲解。
